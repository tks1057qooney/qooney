<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŸã—ã–ã‚“ãƒ¬ãƒ³ã‚·ãƒ¥ã‚¦ï¼ | 10ã®ã‹ãŸã¾ã‚Šã‚’ã¤ãã‚ã†</title>
    
    <!-- Tailwind CSSã®èª­ã¿è¾¼ã¿ -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fontsã®èª­ã¿è¾¼ã¿ï¼ˆM PLUS Rounded 1cï¼‰ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* M PLUS Rounded 1cãƒ•ã‚©ãƒ³ãƒˆã‚’å…¨ä½“ã«é©ç”¨ */
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        /* æ•°å­—å…¥åŠ›æ¬„ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .num-input {
            width: 60px;
            height: 60px;
            text-align: center;
            font-size: 2rem;
            font-weight: 800;
            border: 3px solid #9ca3af;
            border-radius: 0.5rem;
            color: #1e40af;
            transition: all 0.2s;
        }
        .num-input:focus {
            outline: none;
            border-color: #f97316;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3);
        }
        /* ç­”ãˆåˆã‚ã›ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .check-btn {
            padding: 0.75rem 2rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(to top, #f97316, #fb923c);
            border-radius: 0.75rem;
            border-bottom: 5px solid #ea580c;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.1s ease-in-out;
        }
        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .check-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-bottom-width: 2px;
        }
        /* æ¬¡ã®å•é¡Œã¸ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .next-btn {
            padding: 0.75rem 2rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(to top, #22c55e, #4ade80);
            border-radius: 0.75rem;
            border-bottom: 5px solid #16a34a;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.1s ease-in-out;
        }
        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .next-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-bottom-width: 2px;
        }
    </style>
</head>
<body class="bg-blue-100 flex items-center justify-center min-h-screen">

    <div class="container mx-auto p-4 max-w-2xl">
        <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
            
            <header class="text-center mb-6">
                <h1 class="text-3xl md:text-4xl font-extrabold text-blue-800">ãŸã—ã–ã‚“ãƒ¬ãƒ³ã‚·ãƒ¥ã‚¦ï¼</h1>
                <p class="text-lg md:text-xl text-blue-600 font-bold mt-1">ï½10ã®ã‹ãŸã¾ã‚Šã‚’ã¤ãã‚ã†ï½</p>
            </header>

            <main>
                <!-- å•é¡Œè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                <div id="problem-display" class="bg-blue-50 border-4 border-blue-200 rounded-xl p-4 text-center mb-6">
                    <p class="text-xl text-gray-700 mb-2">ã‚‚ã‚“ã ã„</p>
                    <p id="problem-text" class="text-5xl md:text-6xl font-extrabold text-gray-800 tracking-wider"></p>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                <div id="steps-container" class="space-y-6">
                    <!-- ã‚¹ãƒ†ãƒƒãƒ—1: 10ã®ç›¸æ–¹ã‚’è¦‹ã¤ã‘ã‚‹ -->
                    <div id="step1" class="bg-amber-50 p-5 rounded-lg border-2 border-amber-200">
                        <p class="text-lg font-bold text-amber-800 mb-3">
                            <span class="bg-amber-500 text-white rounded-full px-3 py-1 mr-2">1</span>
                            ã¾ãšã€<span id="s1-num1" class="font-extrabold text-2xl"></span> ã‚’10ã«ã—ã‚ˆã†ï¼
                        </p>
                        <div class="flex items-center justify-center space-x-2 text-3xl font-bold text-gray-700">
                            <span id="s1-num1-2" class="text-blue-800"></span>
                            <span>+</span>
                            <input type="number" id="s1-input" class="num-input">
                            <span>=</span>
                            <span>10</span>
                        </div>
                    </div>

                    <!-- ã‚¹ãƒ†ãƒƒãƒ—2: ã‚‚ã†ç‰‡æ–¹ã®æ•°ã‚’åˆ†ã‘ã‚‹ -->
                    <div id="step2" class="bg-sky-50 p-5 rounded-lg border-2 border-sky-200 hidden">
                        <p class="text-lg font-bold text-sky-800 mb-3">
                            <span class="bg-sky-500 text-white rounded-full px-3 py-1 mr-2">2</span>
                            ã„ã„ã­ï¼ãã®<span id="s2-split-num1" class="font-extrabold text-2xl text-amber-600"></span>ã‚’ <span id="s2-num2" class="font-extrabold text-2xl"></span> ã‹ã‚‰å€Ÿã‚Šã‚ˆã†ï¼
                        </p>
                        <div class="flex items-center justify-center space-x-2 text-3xl font-bold text-gray-700">
                             <span id="s2-num2-2" class="text-blue-800"></span>
                            <span class="text-xl">ã¯ã€</span>
                            <span id="s2-split-num1-2" class="text-amber-600"></span>
                            <span class="text-xl">ã¨</span>
                            <input type="number" id="s2-input" class="num-input">
                             <span class="text-xl">ã«ã‚ã‘ã‚‰ã‚Œã‚‹ã­</span>
                        </div>
                    </div>

                    <!-- ã‚¹ãƒ†ãƒƒãƒ—3: æœ€å¾Œã®è¶³ã—ç®— -->
                    <div id="step3" class="bg-emerald-50 p-5 rounded-lg border-2 border-emerald-200 hidden">
                        <p class="text-lg font-bold text-emerald-800 mb-3">
                            <span class="bg-emerald-500 text-white rounded-full px-3 py-1 mr-2">3</span>
                            ã•ã„ã”ã«ã€ã®ã“ã‚Šã‚’ãŸãã†ï¼
                        </p>
                        <div class="flex items-center justify-center space-x-2 text-3xl font-bold text-gray-700">
                            <span>10</span>
                            <span>+</span>
                            <span id="s3-split-num2"></span>
                            <span>=</span>
                            <input type="number" id="s3-input" class="num-input">
                        </div>
                    </div>
                </div>

                <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ -->
                <div class="mt-6 text-center">
                    <div id="message-box" class="h-12 flex items-center justify-center">
                        <p id="message-text" class="text-xl font-bold"></p>
                    </div>
                    <button id="check-button" class="check-btn">ã“ãŸãˆã‚ã‚ã›</button>
                    <button id="next-button" class="next-btn hidden">ã¤ãã®ã‚‚ã‚“ã ã„ã¸</button>
                </div>
            </main>
        </div>
    </div>

    <script>
        // === DOMè¦ç´ ã®å–å¾— ===
        const problemText = document.getElementById('problem-text');
        const messageText = document.getElementById('message-text');
        const checkButton = document.getElementById('check-button');
        const nextButton = document.getElementById('next-button');

        // ã‚¹ãƒ†ãƒƒãƒ—1
        const step1 = document.getElementById('step1');
        const s1_num1 = document.getElementById('s1-num1');
        const s1_num1_2 = document.getElementById('s1-num1-2');
        const s1_input = document.getElementById('s1-input');

        // ã‚¹ãƒ†ãƒƒãƒ—2
        const step2 = document.getElementById('step2');
        const s2_split_num1 = document.getElementById('s2-split-num1');
        const s2_num2 = document.getElementById('s2-num2');
        const s2_num2_2 = document.getElementById('s2-num2-2');
        const s2_split_num1_2 = document.getElementById('s2-split-num1-2');
        const s2_input = document.getElementById('s2-input');

        // ã‚¹ãƒ†ãƒƒãƒ—3
        const step3 = document.getElementById('step3');
        const s3_split_num2 = document.getElementById('s3-split-num2');
        const s3_input = document.getElementById('s3-input');

        // === å•é¡Œã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹å¤‰æ•° ===
        let num1, num2, answer, splitNum1, splitNum2;
        let currentStep = 1;

        // === é–¢æ•° ===

        /**
         * æ–°ã—ã„å•é¡Œã‚’ä½œæˆã—ã¦è¡¨ç¤ºã™ã‚‹
         */
        function generateProblem() {
            // ç¹°ã‚Šä¸ŠãŒã‚ŠãŒå¿…ãšç™ºç”Ÿã™ã‚‹1æ¡ã®æ•°å­—ã®çµ„ã¿åˆã‚ã›ã‚’ç”Ÿæˆ
            do {
                num1 = Math.floor(Math.random() * 8) + 2; // 2ã‹ã‚‰9
                num2 = Math.floor(Math.random() * 8) + 2; // 2ã‹ã‚‰9
            } while (num1 + num2 <= 10);

            answer = num1 + num2;
            splitNum1 = 10 - num1; // 10ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªæ•° (num1ã®è£œæ•°)
            splitNum2 = num2 - splitNum1; // æ®‹ã‚Šã®æ•°

            // UIã‚’åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆ
            currentStep = 1;
            problemText.textContent = `${num1} + ${num2} = ?`;
            
            // ã‚¹ãƒ†ãƒƒãƒ—1ã®è¡¨ç¤ºè¨­å®š
            step1.classList.remove('hidden');
            s1_num1.textContent = num1;
            s1_num1_2.textContent = num1;
            s1_input.value = '';

            // ã‚¹ãƒ†ãƒƒãƒ—2ã¨3ã‚’éš ã™
            step2.classList.add('hidden');
            step3.classList.add('hidden');

            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒœã‚¿ãƒ³ã®ãƒªã‚»ãƒƒãƒˆ
            messageText.textContent = '';
            checkButton.classList.remove('hidden');
            nextButton.classList.add('hidden');
            
            // æœ€åˆã®å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
            s1_input.focus();
        }

        /**
         * ã€Œã“ãŸãˆã‚ã‚ã›ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã®å‡¦ç†
         */
        function checkAnswer() {
            messageText.textContent = ''; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢

            if (currentStep === 1) {
                const val = parseInt(s1_input.value);
                // æ­£è§£æ¡ä»¶: å…¥åŠ›ã—ãŸæ•°ãŒã€10ã‚’ä½œã‚‹ãŸã‚ã®æ­£ã—ã„æ•°ã§ã‚ã‚‹ã“ã¨
                if (val === splitNum1) {
                    showSuccessAndMoveNext(2);
                } else {
                    showError(`${num1}ã¨ã„ãã¤ã§10ã«ãªã‚‹ã‹ãªï¼Ÿ`);
                }
            } else if (currentStep === 2) {
                const val = parseInt(s2_input.value);
                // æ­£è§£æ¡ä»¶: å…¥åŠ›ã—ãŸæ•°ãŒã€num2ã‚’åˆ†ã‘ãŸæ®‹ã‚Šã®æ•°ã¨ã—ã¦æ­£ã—ã„ã“ã¨
                if (val === splitNum2) {
                    showSuccessAndMoveNext(3);
                } else {
                    showError(`${num2}ã¯ ${splitNum1}ã¨ ã„ãã¤ã«ã‚ã‘ã‚‰ã‚Œã‚‹ã‹ãªï¼Ÿ`);
                }
            } else if (currentStep === 3) {
                const val = parseInt(s3_input.value);
                // æ­£è§£æ¡ä»¶: æœ€çµ‚çš„ãªç­”ãˆãŒæ­£ã—ã„ã“ã¨
                if (val === answer) {
                    showFinalSuccess();
                } else {
                    showError(`ã‚ã¨ã™ã“ã—ï¼10ã¨${splitNum2}ã‚’ãŸã™ã¨â€¦ï¼Ÿ`);
                }
            }
        }
        
        /**
         * æ­£è§£æ™‚ã®å‡¦ç†ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®ç§»è¡Œ
         * @param {number} nextStep - æ¬¡ã«è¡¨ç¤ºã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—ç•ªå·
         */
        function showSuccessAndMoveNext(nextStep) {
            messageText.textContent = 'ãƒ”ãƒ³ãƒãƒ¼ãƒ³ï¼ãã®ã¡ã‚‡ã†ã—ï¼';
            messageText.className = 'text-xl font-bold text-green-600';
            
            // 0.8ç§’å¾Œã«æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¡¨ç¤º
            setTimeout(() => {
                messageText.textContent = '';
                if (nextStep === 2) {
                    step1.classList.add('hidden');
                    step2.classList.remove('hidden');
                    // ã‚¹ãƒ†ãƒƒãƒ—2ã®æ•°å­—ã‚’è¨­å®š
                    s2_split_num1.textContent = splitNum1;
                    s2_num2.textContent = num2;
                    s2_num2_2.textContent = num2;
                    s2_split_num1_2.textContent = splitNum1;
                    s2_input.value = '';
                    s2_input.focus();
                } else if (nextStep === 3) {
                    step2.classList.add('hidden');
                    step3.classList.remove('hidden');
                    // ã‚¹ãƒ†ãƒƒãƒ—3ã®æ•°å­—ã‚’è¨­å®š
                    s3_split_num2.textContent = splitNum2;
                    s3_input.value = '';
                    s3_input.focus();
                }
                currentStep = nextStep;
            }, 800);
        }

        /**
         * æœ€çµ‚å•é¡Œæ­£è§£æ™‚ã®å‡¦ç†
         */
        function showFinalSuccess() {
            problemText.textContent = `${num1} + ${num2} = ${answer}`;
            messageText.innerHTML = 'ğŸ‰ ã›ã„ã‹ã„ï¼ã‹ã‚“ãºãã ã­ï¼ ğŸ‰';
            messageText.className = 'text-xl font-bold text-orange-500';
            step3.classList.add('hidden');
            checkButton.classList.add('hidden');
            nextButton.classList.remove('hidden');
        }

        /**
         * ä¸æ­£è§£æ™‚ã®å‡¦ç†
         * @param {string} msg - è¡¨ç¤ºã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
         */
        function showError(msg) {
            messageText.textContent = 'ğŸ¤” ' + msg;
            messageText.className = 'text-xl font-bold text-red-600';
        }

        // === ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š ===
        checkButton.addEventListener('click', checkAnswer);
        nextButton.addEventListener('click', generateProblem);
        
        // Enterã‚­ãƒ¼ã§ç­”ãˆåˆã‚ã›ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
        document.querySelectorAll('.num-input').forEach(input => {
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        });

        // ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«æœ€åˆã®å•é¡Œã‚’ä½œæˆ
        window.onload = generateProblem;
    </script>
</body>
</html>
